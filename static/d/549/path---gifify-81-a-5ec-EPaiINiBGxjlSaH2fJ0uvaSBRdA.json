{"data":{"site":{"siteMetadata":{"title":"nandemonas","author":"Nas Villanueva","twitterUsername":"@nasvillanueva_","siteUrl":"https://www.nasvillanueva.com"}},"markdownRemark":{"id":"7706ca67-443c-5240-b994-5f3912d14d41","excerpt":"\nAt work, we use a service called Assembla, a service like Github. Sometimes, to make our tickets more understandable, we include screenshots or screencasts. But the problem is, on Assembla, they don't have an embedded video player\nfor the screencast we upload, even when it's in a web compatible format. So I created this script.\n\n","html":"<p>At work, we use a service called Assembla, a service like Github. Sometimes, to make our tickets more understandable, we include screenshots or screencasts. But the problem is, on Assembla, they don’t have an embedded video player\nfor the screencast we upload, even when it’s in a web compatible format. So I created this script.</p>\n<!--excerpt-->\n<h1>The Script (not the band)</h1>\n<p><code class=\"language-text\">gifify.sh</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\">#!/usr/bin/env bash</span>\n\nTEMP_DIR<span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>mktemp -d $TMPDIR/gifify.$RANDOM<span class=\"token variable\">)</span></span>\n\nffmpeg -i <span class=\"token variable\">$1</span> -r 5 <span class=\"token string\">\"<span class=\"token variable\">$TEMP_DIR</span>/frames-%03d.jpg\"</span>\n\nFILENAME<span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">basename</span> $1<span class=\"token variable\">)</span></span>\n\nconvert -delay 20 -loop 0 <span class=\"token variable\">$TEMP_DIR</span>/frames-*.jpg <span class=\"token string\">\"<span class=\"token variable\">${FILENAME%%.*}</span>.gif\"</span>\n\n<span class=\"token function\">rm</span> -rf <span class=\"token variable\">$TEMP_DIR</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Before being able to run this script, you’d have to have these tools installed:</p>\n<ul>\n<li><a href=\"https://www.ffmpeg.org\">ffmpeg</a> - for slicing your video into images; and</li>\n<li><a href=\"https://www.imagemagick.org\">ImageMagick</a> - for combining your slices of images into a GIF.</li>\n</ul>\n<h3>Let’s dissect <code class=\"language-text\">line 5</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">ffmpeg                      <span class=\"token comment\"># Call ffmpeg.</span>\n    -i <span class=\"token variable\">$1</span>                   <span class=\"token comment\"># Pass script first argumen as input file.</span>\n    -r 5                    <span class=\"token comment\"># Set framerate to 5.</span>\n<span class=\"token string\">\"<span class=\"token variable\">$TEMP_DIR</span>/frames-%03d.jpg\"</span> <span class=\"token comment\"># Tell ffmpeg where to put the slices,</span>\n                            <span class=\"token comment\"># with a filename template.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>And <code class=\"language-text\">line 9</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">convert                     <span class=\"token comment\"># Call ImageMagick convert.</span>\n    -delay 20               <span class=\"token comment\"># Delay before the next image shows.</span>\n    -loop 0                 <span class=\"token comment\"># Set loop to infinite.</span>\n    <span class=\"token variable\">$TEMP_DIR</span>/frames-*.jpg  <span class=\"token comment\"># Tell ImageMagick where the slices are.</span>\n    <span class=\"token string\">\"<span class=\"token variable\">${FILENAME%%.*}</span>.gif\"</span>   <span class=\"token comment\"># Tell ImageMagick the output filename,</span>\n                            <span class=\"token comment\"># replacing the original extension to .gif</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<br>\n<blockquote>\n<p>I am, by no means, an advanced user of ffmpeg nor ImageMagick, that’s why I only used minimal options for each tool.</p>\n</blockquote>\n<h1>Running the script</h1>\n<p><code class=\"language-text\">gifify.sh ./sample.mov</code></p>\n<p>This will produce a GIF file with the same filename as the input.</p>\n<h1>Demo</h1>\n<p>Here’s a screencast I recorded using Quicktime. <code class=\"language-text\">sample.mov</code></p>\n<video width=\"100%\" height=\"auto\" controls>\n    <source src=\"/sample-49d931fb81bdacb2c6e2dd5744e5f3ea.mov\">\n    Your browser does not support the video tag.\n</video>\n<br>\n<p>Here’s a <em>gifified</em> file. <code class=\"language-text\">sample.gif</code></p>\n<p><img src=\"/sample-9ffcc51955357da363364e414f6f112c.gif\" alt=\"sample.gif\"></p>\n<br>\n<p>Now, it’s easier to embed a screencastª, albeit fake, on Assembla (or even Github, GitLab, etc.)</p>","frontmatter":{"title":"gifify.sh — Convert Videos to GIFs","date":"October 15, 2018","qiitaUrl":"https://qiita.com/nasvillanueva/items/29d0b4e9b2f0223e3d6c"}}},"pageContext":{"slug":"/gifify/","previous":{"fields":{"slug":"/migrating-docker-images/"},"frontmatter":{"title":"Migrating Docker Images"}},"next":null}}